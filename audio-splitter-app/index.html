<!Doctype html>
<head>
  <meta charset="UTF-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Audio Splitter</title>
</head>
<body>
   <form id="form" method="post">
    <fieldset>
      <legend>Audio processing options</legend>
      <input type="radio" id="stems" name="stems" value="spleeter:2stems">
      <label for="2-stems">2-stems: Vocal + Other</label><br>
      <input type="radio" id="stems" name="stems" value="spleeter:4stems">
      <label for="4-stems">4-stems: Vocal + Drums + Bass + Other</label><br>
      <input type="radio" id="stems" name="stems" value="spleeter:5stems">
      <label for="5-stems">5-stems: Vocal + Drums + Bass + Piano + Other</label> 
  </fieldset>

  <br><br> 

  <fieldset>
    <legend>Select an audio file to process</legend>
    <label for="file">Select audio file:</label>
    <input type="text" id="file" name="file">
</fieldset>

<br><br> 
      
<fieldset>
  <legend>Select location to save stems</legend>
  <label for="folder">Select a location:</label>
  <input type="text" id="folder" name="folder">
  
</fieldset>

<br><br>  

<input type="submit">
    </form> 
   
    <script>
      // const formEl = document.querySelector('.form');

      // formEl.addEventListener('submit', event => {
      //   event.preventDefault();

      //   const formData = new FormData(formEl);
      //   const data = Object.fromEntries(formData);
      //   console.log(data);

      //   fetch('http://127.0.0.1:5000/library', {
      //     method: 'POST',
      //     headers: {
      //       'Content-Type': 'application/json'
      //     },
      //     body: JSON.stringify(data)
      //   }).then(response => response.json())
      //     .then(data => console.log(data))
      //     .catch(error => console.log(error));
      // });

      document.getElementById('form').addEventListener('submit', function(e) {
        e.preventDefault();

        const userStems = document.getElementById('stems');
        const userFile = document.getElementById('file');
        const userFolder = document.getElementById('folder');

        const formData = new FormData();
        formData.append('stems', userStems);
        formData.append('file', userFile);
        formData.append('folder', userFolder);

        fetch('http://127.0.0.1:5000/library', {
          method: "POST",
          body: formData,
        })
        .then(result => result.json())
        .then(data => console.log(data))
        .then(error => console.log(error))
      });

      // document.getElementById('form').addEventListener('submit', function(e) {
      //   e.preventDefault();

      //   const userStems = document.getElementById('stems');
      //   const userFile = document.getElementById('file');
      //   const userFolder = document.getElementById('folder');

      //   const formData = new FormData();
      //   formData.append('user-stems', userStems);
      //   formData.append('user-file', userFile);
      //   formData.append('user-folder', userFolder);

      //   fetch('https://httpbin.org/post', {
      //     method: "POST",
      //     body: formData,
      //   })
      //   .then(result => result.json())
      //   .then(data => console.log(data))
      //   .then(error => console.log(error))
      // });

      // var myHeaders = new Headers();
      // myHeaders.append("Content-Type", "application/json");

      // var raw = JSON.stringify({
      //   "stems": "spleeter:4stems",
      //   "file": "audio_example.mp3",
      //   "folder": "output4"
      // });

      // var requestOptions = {
      //   method: 'POST',
      //   headers: myHeaders,
      //   body: raw,
      //   redirect: 'follow'
      // };

      // fetch("http://127.0.0.1:5000/library", requestOptions)
      //   .then(response => response.text())
      //   .then(result => console.log(result))
      //   .catch(error => console.log('error', error));

    </script>

</body>

</html>